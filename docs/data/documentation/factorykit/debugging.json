{"abstract":[{"type":"text","text":"Additional support for debugging resolution cycles, dependency chains and other issue."}],"kind":"article","sections":[],"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/factorykit\/debugging"]}],"seeAlsoSections":[{"title":"Development and Testing","generated":true,"anchor":"Development-and-Testing","identifiers":["doc:\/\/FactoryKit\/documentation\/FactoryKit\/Previews","doc:\/\/FactoryKit\/documentation\/FactoryKit\/Testing","doc:\/\/FactoryKit\/documentation\/FactoryKit\/Contexts","doc:\/\/FactoryKit\/documentation\/FactoryKit\/Chains"]}],"hierarchy":{"paths":[["doc:\/\/FactoryKit\/documentation\/FactoryKit"]]},"metadata":{"role":"article","modules":[{"name":"FactoryKit"}],"roleHeading":"Article","title":"Debugging"},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/FactoryKit\/documentation\/FactoryKit\/Debugging"},"primaryContentSections":[{"content":[{"anchor":"Tracing-the-Resolution-Cycle","type":"heading","level":2,"text":"Tracing the Resolution Cycle"},{"type":"paragraph","inlineContent":[{"text":"When running in DEBUG mode Factory allows you to trace the injection process and see every object instantiated or returned from a cache during a given ","type":"text"},{"identifier":"doc:\/\/FactoryKit\/documentation\/FactoryKit\/Cycle","type":"reference","isActive":true},{"text":".","type":"text"}]},{"type":"codeListing","code":["0: Factory.Container.cycleDemo<CycleDemo> = N:105553131389696","1:     Factory.Container.aService<AServiceType> = N:105553119821680","2:         Factory.Container.implementsAB<AServiceType & BServiceType> = N:105553119821680","3:             Factory.Container.networkService<NetworkService> = N:105553119770688","1:     Factory.Container.bService<BServiceType> = N:105553119821680","2:         Factory.Container.implementsAB<AServiceType & BServiceType> = C:105553119821680"],"syntax":null},{"type":"paragraph","inlineContent":[{"type":"text","text":"Each line in the trace shows the depth (with 0 as the root), the factory called, the type of the service created, and the id\/address of the object itself."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Each address has a prefix indicating whether or not a new object was created (N:) or if an existing object was returned from a scope cache (C:)."}]},{"type":"paragraph","inlineContent":[{"text":"Just toggle the trace flag to enable\/disable logging.","type":"text"}]},{"type":"codeListing","code":["Container.shared.manager.trace.toggle()"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Turning on a trace can be helpful in testing when you want to get an idea of an object’s dependency tree."}]},{"type":"paragraph","inlineContent":[{"text":"Note that enabling trace logging enables it for ","type":"text"},{"type":"emphasis","inlineContent":[{"text":"all","type":"text"}]},{"text":" containers.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"One final consideration is that logging the construction of an object will show everything initialized as part of that resolution cycle. Anything created lazily after the fact may not appear in the trace."}]},{"anchor":"Logging","type":"heading","level":2,"text":"Logging"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Trace logs are usually just printed to the system log, but you can change that behavior if needed."}]},{"type":"codeListing","code":["Container.shared.manager.logger = {","    MyLogger.debug(\"Factory: \\($0)\")","}"],"syntax":"swift"},{"type":"paragraph","inlineContent":[{"text":"Note this changes the logging behavior for ","type":"text"},{"inlineContent":[{"text":"all","type":"text"}],"type":"emphasis"},{"text":" containers.","type":"text"}]},{"anchor":"Circular-Dependency-Chain-Detection","type":"heading","level":2,"text":"Circular Dependency Chain Detection"},{"type":"paragraph","inlineContent":[{"type":"text","text":"What’s a circular dependency? Let’s say that A needs B to be constructed, and B needs a C. But what happens if C was defined such that it needs an A?"}]},{"type":"paragraph","inlineContent":[{"text":"That’s a Circular Dependency Chain.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"Factory can detect such things and warn you about them during the development process.","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"The subject’s a bit involved, so there’s an entire page devoted to it.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"See "},{"type":"reference","identifier":"doc:\/\/FactoryKit\/documentation\/FactoryKit\/Chains","isActive":true},{"type":"text","text":"."}]}],"kind":"content"}],"schemaVersion":{"patch":0,"major":0,"minor":3},"references":{"doc://FactoryKit/documentation/FactoryKit":{"type":"topic","identifier":"doc:\/\/FactoryKit\/documentation\/FactoryKit","url":"\/documentation\/factorykit","kind":"symbol","role":"collection","abstract":[{"text":"A modern approach to Container-Based Dependency Injection for Swift and SwiftUI.","type":"text"}],"title":"FactoryKit"},"doc://FactoryKit/documentation/FactoryKit/Contexts":{"url":"\/documentation\/factorykit\/contexts","abstract":[{"type":"text","text":"Changing injection results under special circumstances."}],"kind":"article","identifier":"doc:\/\/FactoryKit\/documentation\/FactoryKit\/Contexts","role":"article","type":"topic","title":"Contexts"},"doc://FactoryKit/documentation/FactoryKit/Testing":{"identifier":"doc:\/\/FactoryKit\/documentation\/FactoryKit\/Testing","kind":"article","title":"Testing","type":"topic","role":"article","abstract":[{"type":"text","text":"Using Factory for Unit and UI Testing."}],"url":"\/documentation\/factorykit\/testing"},"doc://FactoryKit/documentation/FactoryKit/Previews":{"type":"topic","role":"article","identifier":"doc:\/\/FactoryKit\/documentation\/FactoryKit\/Previews","kind":"article","title":"SwiftUI Previews","abstract":[{"type":"text","text":"Mocking dependencies for SwiftUI Previews."}],"url":"\/documentation\/factorykit\/previews"},"doc://FactoryKit/documentation/FactoryKit/Chains":{"role":"article","kind":"article","title":"Circular Dependency Chains","type":"topic","identifier":"doc:\/\/FactoryKit\/documentation\/FactoryKit\/Chains","url":"\/documentation\/factorykit\/chains","abstract":[{"type":"text","text":"Detecting and solving Circular Dependency Chains."}]},"doc://FactoryKit/documentation/FactoryKit/Cycle":{"type":"topic","abstract":[{"type":"text","text":"What’s a resolution cycle, and why should we care?"}],"identifier":"doc:\/\/FactoryKit\/documentation\/FactoryKit\/Cycle","title":"Resolution Cycles","url":"\/documentation\/factorykit\/cycle","role":"article","kind":"article"}}}